

# 共通点
- 音频 = 时间 + 1D
- 视频 = 时间 + 2D

# 剪辑
- 文件：封装格式(format)、混流(remux)、分割(split)、拼接(concat)
- 流编码(stream-encode)
  - 混合(mix)、叠加(overlay)、合成(merge)
    - 水印(watermark)、字幕(subtitle)、画中画(Picture-in-picture)、图片(stillimage)
    - 过渡(transition)、混音(mixing)
  - 变换(transformation)
    - 平移(translation)、旋转(rotation)、缩放(scaling)
  - 滤镜(filter)
    - 绘制、特效、音效、变形、调色、模糊、变速、……


# 视频
## 画面/帧
- 像素颜色、色彩、pix_fmts
  - range: pc, tv, 8/10/12bit
  - space, trc, primaries
  - bt601, bt709, bt2020, sRGB, sYCC
  - yuv420, yuv411, yuv422, yuv444, ...
- 色彩空间
  - format/pixel
    - channels * samples * depth * field_order: yuv * 4:2:0 * 8bit * progressive
  - encoding/color
    - range (tv-pc)
    - matrix/space (YUV-RGB)
    - trc (RGB-LRGB)
    - primaries (LRGB-XYZ)
- 色彩转换？色彩映射？
  - 转换：有损、重编码
  - 映射：无损、元信息、色彩描述


# ffmpeg

## 结构
- file (muxer)
- stream (-codec)
- packet (encoder)
- frame (-filter)

## 音视频异同
- duration
- bitrate
- encoding
  - depth: sample_fmt/pix_fmt
- rate: samplerate/framerate
- layout: channels/size+aspect


## 技巧
- 转义规则
- stdin(-), null
- avs, *_script, sendcmd, ffpreset
- debug
- scale, scale2ref, zscale
- copy

[图标]:https://en.wikipedia.org/wiki/JPEG#Entropy_coding


## 命令行
- 时间
  - -ss, -t, -itsoffset
  - -sseof, -to
- 通用
  - -frames:v/a
  - -codec, -c:a/v
  - -filter, -af/vf
    - -filter_complex/lavfi
    - -bsf:a/v
  - -q:a/v
  - -f
  - -map
- 空间
  - 通用
    - rate
  - 音频
    - -sample_fmt
    - -ac
    - -aq
  - 视频
    - -pix_fmt
    - size, aspect
- filtergrapth
   - `[in]filtername=key=val:key2=val2,finame2[out];`
- 其他
  - crf


## 限制、局限
- 图片色彩管理
- sei, side_data, exif

[图片色彩管理: littlecms, Adobe Photoshop]:\
