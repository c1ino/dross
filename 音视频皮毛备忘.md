

# 共通点
- 音频 = 时间 + 1D
- 视频 = 时间 + 2D

# 剪辑
- 文件：封装格式(format)、混流(remux)、分割(split)、拼接(concat)
- 流编码(stream-encode)
  - 混合(mix)、叠加(overlay)、合成(merge)
    - 水印(watermark)、字幕(subtitle)、画中画(Picture-in-picture)、图片(stillimage)
    - 过渡(transition)、混音(mixing)
  - 变换(transformation)
    - 平移(translation)、旋转(rotation)、缩放(scaling)
  - 滤镜(filter)
    - 绘制、特效、音效、变形、调色、模糊、变速、……


# 视频
## 画面/帧
- 像素颜色、色彩、pix_fmts
  - range: pc, tv, 8/10/12bit
  - space, trc, primaries
  - bt601, bt709, bt2020, sRGB, sYCC
  - yuv420, yuv411, yuv422, yuv444, ...
  - SDR, HDR
- 色彩格式
  - format/pixel
    - channels * samples * depth * field_order: yuv * 4:2:0 * 8bit * progressive
  - encoding/color
    - range (tv-pc)
    - matrix/space (YUV-RGB)
    - trc (RGB-LRGB)
    - primaries (LRGB-XYZ)
- 色彩转换？色彩映射？
  - 转换：有损、重编码
  - 映射：无损、元信息、色彩描述
- 色彩编码
  - range/范围（tv-pc）
  - matrix/space/矩阵系数/色彩空间（YUV-RGB）：
    - 因为人眼对亮度敏感，从 RGB 转换到 YUV420，UV通道少采样可以减少一半带宽。
  - trc （RGB-LRGB）：
    - 因为人眼对亮度敏感，从 线性-RGB 转换到 RGB，人眼可感知的亮度变化更均匀（非线性），减少不可感知的亮度数据浪费。 
    - 伽马（校正）。
  - primaries （LRGB-XYZ）：
    - 从 线性-RGB 转换到 XYZ，XYZ空间与设备无关，方便色彩的转换和换算。
- 色彩空间
  - RGB
  - CMYK, RYB
  - YUV/YCbCr/YPbPr
  - HSL/HSV
  - CIE-sRGB
  - CIE-XYZ
  - CIE-LAB
- 色彩通道
  - HSL/HSV: 色相、饱和度、亮度/明度
    - HSL-亮度：纯黑-色相-纯白
      - 线性、直觉、感知不均匀？
      - 圆柱/方形：纯色x纯黑x纯白
    - HSV-明度：纯黑-色相
      - 非线性、直观、感知均匀？
      - 圆锥/三角：纯色-纯黑-纯白
  - 色相/(色谱)
  - 辉度、亮度/(光源)、灰度
  - 饱和度/色度/彩度/纯度
  - 明度/色调/色值
  - 色温、（色差）
- 色彩其他
  - 加色法/减色法：发光法/吸光法
  - 原色三角 x 高度：RGB、HSV
## 时间轴
- pts, dts, timebase, tbn, tbc, tbr, timestamp


# ffmpeg

## 结构[ ^2]
- file (muxer)
- stream (-codec)
- packet (encoder)
- frame (-filter)
- protocol (transfer)

[ ^2]:https://ffmpeg.org/ffmpeg.html#Detailed-description


## 音视频异同
- duration
- bitrate
- encoding
  - depth: sample_fmt/pix_fmt
- rate: samplerate/framerate
- layout: channels/size+aspect


## 技巧
- 转义规则 [ ^3]
- stdin(-), null
- avs, *_script, sendcmd, ffpreset
- debug, hide_banner
- scale, scale2ref, zscale
- copy

[图标]:https://en.wikipedia.org/wiki/JPEG#Entropy_coding
[ ^3]:https://ffmpeg.org/ffmpeg-filters.html#Notes-on-filtergraph-escaping


## 命令行
- 时间
  - -ss, -t, -itsoffset
  - -sseof, -to 
  - -frames, -fs
- 通用
  - -frames:v/a
  - -codec, -c:a/v
  - -filter, -af/vf
    - -filter_complex/lavfi
    - -bsf:a/v
  - -q:a/v
  - -f
  - -map, -vn/an/sn/dn
- 空间
  - 通用
    - rate
  - 音频
    - -sample_fmt
    - -ac
    - -aq
  - 视频
    - -pix_fmt
    - size, aspect
- filtergrapth
   - `[in]filtername=key=val:key2=val2,finame2[out];`
- 其他
  - crf


## 限制、局限
- 图片色彩管理
  - （繁琐、不通用、不统一）
- sei, side_data, exif

[图片色彩管理: littlecms, Adobe Photoshop]:\
